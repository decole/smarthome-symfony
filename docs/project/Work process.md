# Принцип работы системы

1. Нужен брокер сообщений mqtt. К нему подключаются контроллеры и передают свои данные
2. Со стороны приложения сервис написанный на go lang подписывается на топики, обычно на все (название топика `#`) и передает все полученные данные в очередь сообщений RabbitMQ.  
3. После из очереди сообщений данные получает фоновый процесс, который обрабатывает данные, и хранит в кеше Redis
   - Охранная система - если сущность взведена на охрану, и произошла сработка, будет присылаться телеграм сообщение всем зарегистрированным пользователям в системе, имеющим в своих акаунтах telegram id
   - Пожарная система - если сработает датчик, то будет отправлено оповещение в телеграм всем пользователям
   - Датчики: - при выходе из диапазона нормальных значений - оповещение.
     - Температуры
     - Влыжности
     - Давления
     - Протечки
     - Сухой контакт
4. На сайте при просмотре страниц, можно настроить отображение какие датчики нужно показывать.
5. В приложении можно настроить контроллеры с реле. И давать команды устройствам из приложения.


![principle_of_working_project.drawio.png](../schemas%2Fprinciple_of_working_project.drawio.png)
