# Мониторинг контроллеров умного дома

Мониторим MQTT контроллеры посрдством наблюдения за одним топиком контроллера.

Контроллер отправляет периодически свое состояние, сервис подключен к mqtt слушателю.

Хранит последнюю дату публикованного топика наблюдаемого контроллера.

При необходимости оповещает пользователя если контроллер не пушит данные больше определенного времени.

Данные по контроллерам сохраняются в БД раз в минуту. На сайт отдаются последние закэшированные данные по контроллерам 
или данные из БД если нет кэша по данному контроллеру.


## Как будет выглядеть

Вкладка на сайте "Настройка PLC"

Как зайдем, будет выведена табличка контроллеров с колонкой время последнего действия, выводится время самого близкого к
нашему времени дата и время публикованного топика. 


## Настройки

- контроллер
  - топик наблюдения - записанный вручную
  - флаг оповещения
  - время тишины, после которого будет произходить оповещение


---

Воркер, который при старте кэширует данные по контроллерам.

Берем кэшированные свежие данные из DeviceCacheService, сопостовлять mqtt topic и хранить в кэше.

